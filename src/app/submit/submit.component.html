<div class="pb-20 relative">
  
  <div *ngIf="isDemoUser" class="fixed top-24 right-4 md:right-8 z-50 animate-fade-in">
    <div class="bg-gray-900/90 backdrop-blur-md border border-cyan-500/30 p-3 rounded-xl shadow-[0_0_15px_rgba(6,182,212,0.15)] flex flex-col items-center">
      <div class="text-[10px] text-gray-400 uppercase tracking-widest mb-1 font-orbitron">Demo Credits</div>
      <div [class.text-red-500]="credits <= 2" [class.text-cyan-400]="credits > 2" class="text-3xl font-orbitron font-bold">
        {{ credits }}
      </div>
    </div>
  </div>

  <div class="relative overflow-hidden mb-8 py-10 border-b border-gray-800 bg-gradient-to-b from-[#050a0f] to-transparent">
    <div class="relative z-10 px-4">
      <h1 class="text-4xl md:text-6xl font-bold text-white mb-4 tracking-tighter font-orbitron">
        <span class="text-gray-100">IMMUTABLE</span> 
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-cyan-200 ml-2 md:ml-4">DECISION LOGIC</span>
      </h1>
      <p class="text-gray-400 max-w-2xl text-sm md:text-base leading-relaxed font-sans">
        Create an immutable "snapshot" of your AI's decision-making process. By logging the inputs and outcomes here, you generate a tamper-evident record that proves exactly what the AI decided.
      </p>
    </div>
  </div>

  <div class="mb-8 border border-cyan-900/30 bg-cyan-900/5 rounded p-4 mx-4 md:mx-0">
    <h3 class="text-cyan-500 font-bold text-sm uppercase tracking-wider mb-1 font-orbitron">âš  DEMO ENVIRONMENT</h3>
    <p class="text-cyan-500/70 text-xs font-sans">
      Do not enter real PII. This is a demonstration environment; data is visible to admins.
    </p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    
    <div class="bg-[#0a0a0a] p-6 rounded-lg border border-gray-800 shadow-[0_0_20px_rgba(0,0,0,0.5)]">
      <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2 border-b border-gray-800 pb-4 font-orbitron">
        <span class="text-cyan-500">â–º</span> Log Insurance Event
      </h2>

      <form (ngSubmit)="onSubmit()" class="space-y-5 font-sans">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-xs font-bold text-gray-500 mb-1 font-orbitron">POLICY NUMBER</label>
            <input [(ngModel)]="formData.policyNumber" name="pol" type="text" class="w-full bg-[#050505] border border-gray-700 rounded p-3 text-white focus:border-cyan-500 focus:shadow-[0_0_10px_rgba(6,182,212,0.2)] outline-none transition-all" placeholder="OBX-2025-..." required>
          </div>
          <div>
            <label class="block text-xs font-bold text-gray-500 mb-1 font-orbitron">CLAIM TYPE</label>
            <select [(ngModel)]="formData.incidentType" name="type" class="w-full bg-[#050505] border border-gray-700 rounded p-3 text-white focus:border-cyan-500 outline-none">
              <option>Auto</option>
              <option>Home</option>
              <option>Cyber</option>
              <option>Liability</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-xs font-bold text-gray-500 mb-1 font-orbitron">AMOUNT (Â£)</label>
            <input [(ngModel)]="formData.claimAmount" name="amt" type="number" class="w-full bg-[#050505] border border-gray-700 rounded p-3 text-white focus:border-cyan-500 outline-none">
          </div>
          <div>
            <label class="block text-xs font-bold text-gray-500 mb-1 font-orbitron">AI CONF (0-1.0)</label>
            <input [(ngModel)]="formData.aiConfidenceScore" name="conf" type="number" step="0.01" class="w-full bg-[#050505] border border-gray-700 rounded p-3 text-white focus:border-cyan-500 outline-none">
          </div>
        </div>

        <div>
          <label class="block text-xs font-bold text-gray-500 mb-1 font-orbitron">DECISION NOTES</label>
          <textarea [(ngModel)]="formData.decisionNotes" name="notes" rows="3" class="w-full bg-[#050505] border border-gray-700 rounded p-3 text-white focus:border-cyan-500 outline-none"></textarea>
        </div>

        <button 
          [disabled]="isLoading || (isDemoUser && credits <= 0)" 
          type="submit" 
          class="w-full bg-cyan-500 hover:bg-cyan-400 text-black font-bold py-4 rounded shadow-[0_0_20px_rgba(6,182,212,0.4)] transition-all transform active:scale-95 disabled:opacity-50 disabled:grayscale mt-4 disabled:cursor-not-allowed font-orbitron tracking-wider">
          
          <span *ngIf="isLoading">HASHING...</span>
          <span *ngIf="!isLoading && (!isDemoUser || credits > 0)">COMMIT TO LEDGER</span>
          <span *ngIf="!isLoading && isDemoUser && credits <= 0">CREDITS EXHAUSTED</span>
          
        </button>

        <div *ngIf="errorMessage" class="text-center mt-3 font-mono text-sm">
           <p class="text-red-400 font-bold">{{ errorMessage }}</p>
        </div>

        <div class="pt-6 mt-6 border-t border-gray-800">
          <label class="block text-xs font-bold text-gray-500 mb-2 font-orbitron">OR BATCH UPLOAD (CSV)</label>
          <input type="file" (change)="onBatchUpload($event)" accept=".csv" class="block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-xs file:font-semibold file:bg-gray-800 file:text-cyan-400 hover:file:bg-gray-700 cursor-pointer"/>
          <p class="text-xs text-green-400 mt-2 font-mono" *ngIf="uploadStatus">{{ uploadStatus }}</p>
        </div>
      </form>
    </div>

    <div class="bg-[#0a0a0a] p-6 rounded-lg border border-gray-800 flex flex-col h-full min-h-[400px] shadow-[0_0_20px_rgba(0,0,0,0.5)]">
      <div class="flex-grow flex flex-col justify-center items-center text-center">
        
        <div *ngIf="!latestReceipt" class="text-gray-700 animate-pulse">
          <div class="text-6xl mb-4 opacity-20">ðŸ“œ</div>
          <p class="text-sm font-orbitron text-gray-600">AWAITING IMMUTABLE RECORD...</p>
        </div>

        <div *ngIf="latestReceipt" class="w-full text-left space-y-4 animate-fade-in-up">
          <div class="bg-cyan-900/20 border border-cyan-500/50 text-cyan-400 px-4 py-3 rounded mb-6 text-center text-sm font-bold tracking-widest font-orbitron shadow-[0_0_15px_rgba(6,182,212,0.1)]">
            âœ“ BLOCK COMMITTED
          </div>
          
          <div class="space-y-4 font-mono text-xs">
            <div class="bg-black p-3 rounded border border-gray-800">
              <span class="text-gray-500 block mb-1 font-orbitron text-[10px]">SEQUENCE ID</span>
              <span class="text-white text-sm">{{ latestReceipt.sequence || 'GENESIS' }}</span>
            </div>
            <div class="bg-black p-3 rounded border border-gray-800">
              <span class="text-gray-500 block mb-1 font-orbitron text-[10px]">TIMESTAMP</span>
              <span class="text-white">{{ latestReceipt.timestamp }}</span>
            </div>
            <div class="bg-black p-3 rounded border border-gray-800 group cursor-help">
              <span class="text-gray-500 block mb-1 font-orbitron text-[10px]">CURRENT HASH</span>
              <span class="text-cyan-500 break-all group-hover:text-white transition-colors">{{ latestReceipt.current_hash }}</span>
            </div>
          </div>

          <div class="mt-8 flex gap-3">
            <button (click)="downloadJSON()" class="flex-1 bg-gray-900 hover:bg-gray-800 text-white py-3 rounded border border-gray-700 transition-colors text-xs uppercase font-bold font-orbitron">
              JSON
            </button>
            <button (click)="downloadPDF()" class="flex-1 bg-gray-900 hover:bg-gray-800 text-white py-3 rounded border border-gray-700 transition-colors text-xs uppercase font-bold font-orbitron flex items-center justify-center gap-2">
              <span>ðŸ“„</span> PDF
            </button>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>

<div *ngIf="isDemoUser && credits <= 0" class="fixed inset-0 z-[100] bg-[#020406]/95 backdrop-blur-xl flex items-center justify-center p-4 animate-fade-in overflow-y-auto">
  <div class="max-w-6xl w-full bg-[#050a0f] border-t border-cyan-500/20 shadow-2xl relative my-8 overflow-hidden rounded-xl">

    <div class="text-center pt-10 pb-6">
       <div class="mb-10 flex justify-center">
         <a href="https://obrioxia.com/pilot" class="bg-cyan-400 hover:bg-cyan-300 text-black font-bold py-4 px-12 rounded shadow-[0_0_25px_rgba(34,211,238,0.4)] uppercase text-sm font-orbitron tracking-wider transition-all">
           START 1-WEEK PAID PILOT
         </a>
       </div>
       
       <p class="text-cyan-500/60 font-orbitron text-xs tracking-widest uppercase mb-2">FULL FORENSIC AUDIT OF YOUR AGENT ARCHITECTURE</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 p-8">

      <div class="bg-[#0a0f14] border border-cyan-900/30 rounded-xl p-8 hover:border-cyan-500/50 transition-all group flex flex-col relative">
        <h3 class="text-2xl text-white font-bold mb-1 font-orbitron tracking-wide">Growth Pro 1</h3>
        <div class="text-4xl text-cyan-400 font-orbitron font-bold mb-4">Â£500<span class="text-sm text-cyan-400/60 font-sans font-normal">/mo</span></div>
        
        <p class="text-sm text-gray-400 mb-6 font-sans leading-relaxed min-h-[60px]">
          Essential forensic logging for early-stage production agents. Verify decisions and build trust.
        </p>

        <ul class="space-y-3 text-sm text-gray-300 mb-8 flex-grow font-sans font-bold">
          <li class="flex items-center gap-3"><span class="text-cyan-400">âœ“</span> 100,000 Events / Mo</li>
          <li class="flex items-center gap-3"><span class="text-cyan-400">âœ“</span> 3-Month Retention</li>
          <li class="flex items-center gap-3"><span class="text-cyan-400">âœ“</span> Full Crypto-Shredding</li>
          <li class="flex items-center gap-3"><span class="text-cyan-400">âœ“</span> PDF Evidence Packs</li>
        </ul>

        <a href="https://obrioxia.com/checkout?tier=pro1" class="block w-full py-3 bg-transparent border border-cyan-500/50 text-cyan-400 text-center rounded hover:bg-cyan-500/10 hover:border-cyan-400 uppercase text-xs font-bold tracking-widest transition-all font-orbitron">
          Upgrade to Pro 1
        </a>
      </div>

      <div class="bg-[#050a0f] border border-cyan-400 rounded-xl p-8 relative flex flex-col shadow-[0_0_30px_rgba(34,211,238,0.15)] transform md:-translate-y-2 z-10">
        <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-cyan-400 text-black text-[10px] font-bold px-4 py-1 rounded-full uppercase font-orbitron tracking-wider">
          Most Popular
        </div>

        <h3 class="text-2xl text-white font-bold mb-1 font-orbitron tracking-wide">Growth Pro 2</h3>
        <div class="text-4xl text-cyan-400 font-orbitron font-bold mb-4">Â£1,000<span class="text-sm text-cyan-400/60 font-sans font-normal">/mo</span></div>
        
        <p class="text-sm text-gray-400 mb-6 font-sans leading-relaxed min-h-[60px]">
          Expanded capacity for scaling applications. 6-month retention allows for robust reconstruction.
        </p>

        <ul class="space-y-3 text-sm text-gray-300 mb-8 flex-grow font-sans font-bold">
          <li class="flex items-center gap-3"><span class="text-cyan-400">âœ“</span> 500,000 Events / Mo</li>
          <li class="flex items-center gap-3"><span class="text-cyan-400">âœ“</span> 6-Month Retention</li>
          <li class="flex items-center gap-3"><span class="text-cyan-400">âœ“</span> Everything in Pro 1</li>
          <li class="flex items-center gap-3"><span class="text-cyan-400">âœ“</span> Priority Support</li>
        </ul>

        <a href="https://obrioxia.com/checkout?tier=pro2" class="block w-full py-3 bg-cyan-400 text-black text-center rounded hover:bg-cyan-300 shadow-[0_0_20px_rgba(34,211,238,0.3)] uppercase text-xs font-bold tracking-widest transition-all font-orbitron">
          Upgrade to Pro 2
        </a>
      </div>

      <div class="bg-[#0a0f14] border border-cyan-900/30 rounded-xl p-8 hover:border-cyan-500/50 transition-all group flex flex-col relative">
        <h3 class="text-2xl text-white font-bold mb-1 font-orbitron tracking-wide">Growth Pro 3</h3>
        <div class="text-4xl text-cyan-400 font-orbitron font-bold mb-4">Â£1,500<span class="text-sm text-cyan-400/60 font-sans font-normal">/mo</span></div>
        
        <p class="text-sm text-gray-400 mb-6 font-sans leading-relaxed min-h-[60px]">
          Maximum volume and retention for mission-critical AI. Readiness for annual audits.
        </p>

        <ul class="space-y-3 text-sm text-gray-300 mb-8 flex-grow font-sans font-bold">
          <li class="flex items-center gap-3"><span class="text-cyan-400">âœ“</span> 1,000,000 Events / Mo</li>
          <li class="flex items-center gap-3"><span class="text-cyan-400">âœ“</span> 1-Year Retention</li>
          <li class="flex items-center gap-3"><span class="text-cyan-400">âœ“</span> Everything in Pro 2</li>
          <li class="flex items-center gap-3"><span class="text-cyan-400">âœ“</span> Dedicated Success Mgr</li>
        </ul>

        <a href="https://obrioxia.com/checkout?tier=pro3" class="block w-full py-3 bg-transparent border border-cyan-500/50 text-cyan-400 text-center rounded hover:bg-cyan-500/10 hover:border-cyan-400 uppercase text-xs font-bold tracking-widest transition-all font-orbitron">
          Upgrade to Pro 3
        </a>
      </div>

    </div>

  </div>
</div>
