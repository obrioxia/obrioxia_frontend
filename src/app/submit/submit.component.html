<div class="pb-20 relative">
  
  <div *ngIf="isDemoUser" class="fixed top-24 right-4 md:right-8 z-50 animate-fade-in">
    <div class="bg-gray-900/90 backdrop-blur-md border border-cyan-500/30 p-3 rounded-xl shadow-[0_0_15px_rgba(6,182,212,0.15)] flex flex-col items-center">
      <div class="text-[10px] text-gray-400 uppercase tracking-widest mb-1">Demo Credits</div>
      <div [class.text-red-500]="credits <= 2" [class.text-cyan-400]="credits > 2" class="text-3xl font-mono font-bold">
        {{ credits }}
      </div>
    </div>
  </div>

  <div class="relative overflow-hidden mb-8 py-10 border-b border-gray-800 bg-gradient-to-b from-[#111] to-transparent">
    <div class="relative z-10 px-4">
      <h1 class="text-4xl md:text-6xl font-bold text-white mb-4 tracking-tighter" style="font-family: 'Orbitron', sans-serif;">
        <span class="text-gray-100">IMMUTABLE</span> 
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-600 ml-2 md:ml-4">DECISION LOGIC</span>
      </h1>
      <p class="text-gray-400 max-w-2xl text-sm md:text-base leading-relaxed">
        Create an immutable "snapshot" of your AI's decision-making process. By logging the inputs and outcomes here, you generate a tamper-evident record that proves exactly what the AI decided at this specific moment.
      </p>
    </div>
  </div>

  <div class="mb-8 border border-yellow-600/30 bg-yellow-900/10 rounded p-4 mx-4 md:mx-0">
    <h3 class="text-yellow-500 font-bold text-sm uppercase tracking-wider mb-1">âš  DEMO ENVIRONMENT = NO REAL PERSONAL DATA</h3>
    <p class="text-yellow-500/70 text-xs">
      Please do not enter real PII (Personally Identifiable Information), PHI, or actual policy numbers. This is a demonstration environment; data entered here is visible to the system administrator.
    </p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    
    <div class="bg-[#111] p-6 rounded-lg border border-gray-800 shadow-xl">
      <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2 border-b border-gray-800 pb-4">
        <span class="text-cyan-500">â–º</span> Log Insurance Event
      </h2>

      <form (ngSubmit)="onSubmit()" class="space-y-5">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-xs font-mono text-gray-400 mb-1">POLICY NUMBER</label>
            <input [(ngModel)]="formData.policyNumber" name="pol" type="text" class="w-full bg-black border border-gray-700 rounded p-2 text-white focus:border-cyan-500 outline-none transition-colors" placeholder="OBX-2025-..." required>
          </div>
          <div>
            <label class="block text-xs font-mono text-gray-400 mb-1">CLAIM TYPE</label>
            <select [(ngModel)]="formData.incidentType" name="type" class="w-full bg-black border border-gray-700 rounded p-2 text-white focus:border-cyan-500 outline-none">
              <option>Auto</option>
              <option>Home</option>
              <option>Cyber</option>
              <option>Liability</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-xs font-mono text-gray-400 mb-1">AMOUNT (Â£)</label>
            <input [(ngModel)]="formData.claimAmount" name="amt" type="number" class="w-full bg-black border border-gray-700 rounded p-2 text-white focus:border-cyan-500 outline-none">
          </div>
          <div>
            <label class="block text-xs font-mono text-gray-400 mb-1">AI CONFIDENCE (0-1.0)</label>
            <input [(ngModel)]="formData.aiConfidenceScore" name="conf" type="number" step="0.01" class="w-full bg-black border border-gray-700 rounded p-2 text-white focus:border-cyan-500 outline-none">
          </div>
        </div>

        <div>
          <label class="block text-xs font-mono text-gray-400 mb-1">DECISION NOTES</label>
          <textarea [(ngModel)]="formData.decisionNotes" name="notes" rows="3" class="w-full bg-black border border-gray-700 rounded p-2 text-white focus:border-cyan-500 outline-none"></textarea>
        </div>

        <button 
          [disabled]="isLoading || (isDemoUser && credits <= 0)" 
          type="submit" 
          class="w-full bg-gradient-to-r from-cyan-600 to-blue-700 hover:from-cyan-500 hover:to-blue-600 text-white font-bold py-3 rounded shadow-lg shadow-cyan-900/20 transition-all transform active:scale-95 disabled:opacity-50 disabled:grayscale mt-4 disabled:cursor-not-allowed">
          
          <span *ngIf="isLoading">HASHING & ANCHORING...</span>
          <span *ngIf="!isLoading && (!isDemoUser || credits > 0)">COMMIT TO LEDGER</span>
          <span *ngIf="!isLoading && isDemoUser && credits <= 0">CREDITS EXHAUSTED</span>
          
        </button>

        <div *ngIf="errorMessage" class="text-center mt-3 font-mono text-sm">
           <p class="text-red-400 font-bold">{{ errorMessage }}</p>
        </div>

        <div class="pt-6 mt-6 border-t border-gray-800">
          <label class="block text-xs font-mono text-gray-500 mb-2">OR BATCH UPLOAD (CSV)</label>
          <input type="file" (change)="onBatchUpload($event)" accept=".csv" class="block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-xs file:font-semibold file:bg-gray-800 file:text-cyan-400 hover:file:bg-gray-700 cursor-pointer"/>
          <p class="text-xs text-green-400 mt-2 font-mono" *ngIf="uploadStatus">{{ uploadStatus }}</p>
        </div>
      </form>
    </div>

    <div class="bg-[#111] p-6 rounded-lg border border-gray-800 flex flex-col h-full min-h-[400px]">
      <div class="flex-grow flex flex-col justify-center items-center text-center">
        
        <div *ngIf="!latestReceipt" class="text-gray-600 animate-pulse">
          <div class="text-6xl mb-4 opacity-20">ðŸ“œ</div>
          <p class="text-sm font-mono">Awaiting Immutable Record...</p>
        </div>

        <div *ngIf="latestReceipt" class="w-full text-left space-y-4 animate-fade-in-up">
          <div class="bg-green-500/10 border border-green-500/50 text-green-400 px-4 py-3 rounded mb-6 text-center text-sm font-bold tracking-widest">
            âœ“ BLOCK COMMITTED
          </div>
          
          <div class="space-y-4 font-mono text-xs">
            <div class="bg-black p-3 rounded border border-gray-800">
              <span class="text-gray-500 block mb-1">Sequence ID</span>
              <span class="text-white text-sm">{{ latestReceipt.sequence || 'GENESIS' }}</span>
            </div>
            <div class="bg-black p-3 rounded border border-gray-800">
              <span class="text-gray-500 block mb-1">Timestamp</span>
              <span class="text-white">{{ latestReceipt.timestamp }}</span>
            </div>
            <div class="bg-black p-3 rounded border border-gray-800 group cursor-help">
              <span class="text-gray-500 block mb-1">Current Hash (SHA-256)</span>
              <span class="text-cyan-500 break-all group-hover:text-white transition-colors">{{ latestReceipt.current_hash }}</span>
            </div>
            <div class="bg-black p-3 rounded border border-gray-800">
              <span class="text-gray-500 block mb-1">Previous Hash (Chain Link)</span>
              <span class="text-gray-600 break-all">{{ latestReceipt.prev_hash }}</span>
            </div>
          </div>

          <div class="mt-8 flex gap-3">
            <button (click)="downloadJSON()" class="flex-1 bg-gray-800 hover:bg-gray-700 text-white py-2 rounded border border-gray-600 transition-colors text-xs uppercase font-bold">
              Download JSON
            </button>
            <button (click)="downloadPDF()" class="flex-1 bg-gray-800 hover:bg-gray-700 text-white py-2 rounded border border-gray-600 transition-colors text-xs uppercase font-bold flex items-center justify-center gap-2">
              <span>ðŸ“„</span> PDF Cert
            </button>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>

<div *ngIf="isDemoUser && credits <= 0" class="fixed inset-0 z-[100] bg-[#050a0f]/95 backdrop-blur-xl flex items-center justify-center p-4 animate-fade-in overflow-y-auto">
  <div class="max-w-6xl w-full bg-[#0a0a0a] border-2 border-cyan-500/50 rounded-2xl shadow-[0_0_30px_rgba(6,182,212,0.3)] relative my-8 overflow-hidden">

    <div class="text-center p-8 border-b border-cyan-900/50 bg-gradient-to-b from-[#0a0a0a] to-[#050a0f]">
      <div class="inline-block px-3 py-1 bg-cyan-900/30 border border-cyan-500/50 text-cyan-400 rounded-full text-[10px] font-bold tracking-widest uppercase mb-4 font-orbitron">
        Demo Credits Exhausted
      </div>
      <h2 class="text-3xl md:text-5xl text-white font-bold font-orbitron mb-4">Initialize Production Hub</h2>
      <p class="text-cyan-400/80 max-w-2xl mx-auto text-sm md:text-base font-sans">
        You have experienced the Logger. Now unlock the full **Obrioxia Suite**:
        <span class="text-cyan-400 font-bold">Chain Verifier</span>, <span class="text-cyan-400 font-bold">Crypto Shredder</span>, and the <span class="text-cyan-400 font-bold">Analytics Dashboard</span>.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 p-8">

      <div class="bg-[#0a0a0a] border border-cyan-900/50 rounded-xl p-8 hover:border-cyan-500/80 transition-all duration-300 group flex flex-col relative shadow-[0_0_10px_rgba(6,182,212,0.1)]">
        <h3 class="text-xl text-white font-bold mb-2 font-orbitron">Growth Pro 1</h3>
        <div class="text-4xl text-cyan-500 font-orbitron font-bold mb-1">Â£500<span class="text-sm text-cyan-500/70 font-sans font-normal">/mo</span></div>
        <div class="text-xs text-cyan-400/70 mb-6 uppercase tracking-wider font-sans">Essential forensic logging for early-stage production agents. Verify decisions and build trust with your first users.</div>

        <ul class="space-y-4 text-sm text-cyan-100/80 mb-8 flex-grow font-sans">
          <li class="flex items-start gap-3"><span class="text-cyan-500 mt-0.5">âœ“</span> <span>**100,000** Events / Mo</span></li>
          <li class="flex items-start gap-3"><span class="text-cyan-500 mt-0.5">âœ“</span> <span>**3-Month** Retention</span></li>
          <li class="flex items-start gap-3"><span class="text-cyan-500 mt-0.5">âœ“</span> <span>Full **Crypto-Shredding**</span></li>
          <li class="flex items-start gap-3"><span class="text-cyan-500 mt-0.5">âœ“</span> <span>PDF Evidence Packs</span></li>
        </ul>

        <a href="https://obrioxia.com/checkout?tier=pro1" class="block w-full py-3 border-2 border-cyan-500 text-cyan-400 text-center rounded hover:bg-cyan-500 hover:text-[#0a0a0a] hover:shadow-[0_0_20px_rgba(6,182,212,0.4)] uppercase text-xs font-bold tracking-widest transition-all font-orbitron">
          Upgrade to Pro 1
        </a>
      </div>

      <div class="bg-[#0a0a0a] border-2 border-cyan-500 rounded-xl p-8 relative group flex flex-col shadow-[0_0_25px_rgba(6,182,212,0.2)] transform md:scale-105 z-10">
        <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 px-4 py-1 bg-cyan-500 text-[#0a0a0a] text-[10px] font-bold uppercase rounded-full font-orbitron shadow-[0_0_10px_rgba(6,182,212,0.5)]">Most Popular</div>

        <h3 class="text-xl text-white font-bold mb-2 font-orbitron">Growth Pro 2</h3>
        <div class="text-4xl text-white font-orbitron font-bold mb-1">Â£1,000<span class="text-sm text-white/70 font-sans font-normal">/mo</span></div>
        <div class="text-xs text-white/70 mb-6 uppercase tracking-wider font-sans">Expanded capacity for scaling applications. 6-month retention allows for robust incident reconstruction and trend analysis.</div>

        <ul class="space-y-4 text-white/90 mb-8 flex-grow font-sans">
          <li class="flex items-start gap-3"><span class="text-cyan-400 mt-0.5">âœ“</span> <span>**500,000** Events / Mo</span></li>
          <li class="flex items-start gap-3"><span class="text-cyan-400 mt-0.5">âœ“</span> <span>**6-Month** Retention</span></li>
          <li class="flex items-start gap-3"><span class="text-cyan-400 mt-0.5">âœ“</span> <span>Everything in Pro 1</span></li>
          <li class="flex items-start gap-3"><span class="text-cyan-400 mt-0.5">âœ“</span> <span>**Priority Support**</span></li>
        </ul>

        <a href="https://obrioxia.com/checkout?tier=pro2" class="block w-full py-3 bg-cyan-500 text-[#0a0a0a] text-center rounded hover:bg-cyan-400 shadow-[0_0_30px_rgba(6,182,212,0.5)] uppercase text-xs font-bold tracking-widest transition-all font-orbitron">
          Upgrade to Pro 2
        </a>
      </div>

      <div class="bg-[#0a0a0a] border border-cyan-900/50 rounded-xl p-8 hover:border-cyan-500/80 transition-all duration-300 group flex flex-col relative shadow-[0_0_10px_rgba(6,182,212,0.1)]">
        <h3 class="text-xl text-white font-bold mb-2 font-orbitron">Growth Pro 3</h3>
        <div class="text-4xl text-cyan-500 font-orbitron font-bold mb-1">Â£1,500<span class="text-sm text-cyan-500/70 font-sans font-normal">/mo</span></div>
        <div class="text-xs text-cyan-400/70 mb-6 uppercase tracking-wider font-sans">Maximum volume and retention for mission-critical AI. 1-year history ensures readiness for annual compliance audits.</div>

        <ul class="space-y-4 text-sm text-cyan-100/80 mb-8 flex-grow font-sans">
          <li class="flex items-start gap-3"><span class="text-cyan-500 mt-0.5">âœ“</span> <span>**1,000,000** Events / Mo</span></li>
          <li class="flex items-start gap-3"><span class="text-cyan-500 mt-0.5">âœ“</span> <span>**1-Year** Retention</span></li>
          <li class="flex items-start gap-3"><span class="text-cyan-500 mt-0.5">âœ“</span> <span>Everything in Pro 2</span></li>
          <li class="flex items-start gap-3"><span class="text-cyan-500 mt-0.5">âœ“</span> <span>Dedicated Success Mgr</span></li>
        </ul>

        <a href="https://obrioxia.com/checkout?tier=pro3" class="block w-full py-3 border-2 border-cyan-500 text-cyan-400 text-center rounded hover:bg-cyan-500 hover:text-[#0a0a0a] hover:shadow-[0_0_20px_rgba(6,182,212,0.4)] uppercase text-xs font-bold tracking-widest transition-all font-orbitron">
          Upgrade to Pro 3
        </a>
      </div>

    </div>

    <div class="p-6 bg-[#050a0f] border-t border-cyan-900/50 grid grid-cols-1 md:grid-cols-2 gap-6 items-center font-sans">
      <div class="text-center md:text-left">
        <h4 class="text-white font-bold text-sm font-orbitron">Need Enterprise Scale?</h4>
        <p class="text-xs text-cyan-400/70 mt-1">Custom retention, SLA guarantees, and unlimited events.</p>
      </div>
      <div class="flex gap-4 justify-center md:justify-end font-orbitron">
        <a href="https://obrioxia.com/contact" class="px-6 py-2 text-xs font-bold text-cyan-400 uppercase border border-cyan-500 rounded hover:bg-cyan-500/20 transition-colors">
          Contact Enterprise
        </a>
        <a href="https://obrioxia.com/pilot" class="px-6 py-2 text-xs font-bold text-[#0a0a0a] bg-cyan-500 uppercase rounded hover:bg-cyan-400 shadow-[0_0_15px_rgba(6,182,212,0.3)] transition-colors">
          Start 1-Week Paid Pilot
        </a>
      </div>
    </div>

  </div>
</div>
