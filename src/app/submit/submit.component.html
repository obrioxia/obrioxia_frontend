<div class="pb-20">
  <div class="relative overflow-hidden mb-8 py-10 border-b border-gray-800 bg-gradient-to-b from-[#111] to-transparent">
    <div class="relative z-10 px-4">
      <h1 class="text-4xl md:text-6xl font-bold text-white mb-4 tracking-tighter" style="font-family: 'Orbitron', sans-serif;">
        <span class="text-gray-100">IMMUTABLE</span> 
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-600 ml-2 md:ml-4">DECISION LOGIC</span>
      </h1>
      <p class="text-gray-400 max-w-2xl text-sm md:text-base leading-relaxed">
        Create an immutable "snapshot" of your AI's decision-making process. By logging the inputs and outcomes here, you generate a tamper-evident record that proves exactly what the AI decided at this specific moment.
      </p>
    </div>
  </div>

  <div class="mb-8 border border-yellow-600/30 bg-yellow-900/10 rounded p-4 mx-4 md:mx-0">
    <h3 class="text-yellow-500 font-bold text-sm uppercase tracking-wider mb-1">âš  DEMO ENVIRONMENT = NO REAL PERSONAL DATA</h3>
    <p class="text-yellow-500/70 text-xs">
      Please do not enter real PII (Personally Identifiable Information), PHI, or actual policy numbers. This is a demonstration environment; data entered here is visible to the system administrator.
    </p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    
    <div class="bg-[#111] p-6 rounded-lg border border-gray-800 shadow-xl">
      <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2 border-b border-gray-800 pb-4">
        <span class="text-cyan-500">â–º</span> Log Insurance Event
      </h2>

      <form (ngSubmit)="onSubmit()" class="space-y-5">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-xs font-mono text-gray-400 mb-1">POLICY NUMBER</label>
            <input [(ngModel)]="formData.policyNumber" name="pol" type="text" class="w-full bg-black border border-gray-700 rounded p-2 text-white focus:border-cyan-500 outline-none transition-colors" placeholder="OBX-2025-..." required>
          </div>
          <div>
            <label class="block text-xs font-mono text-gray-400 mb-1">CLAIM TYPE</label>
            <select [(ngModel)]="formData.incidentType" name="type" class="w-full bg-black border border-gray-700 rounded p-2 text-white focus:border-cyan-500 outline-none">
              <option>Auto</option>
              <option>Home</option>
              <option>Cyber</option>
              <option>Liability</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-xs font-mono text-gray-400 mb-1">AMOUNT (Â£)</label>
            <input [(ngModel)]="formData.claimAmount" name="amt" type="number" class="w-full bg-black border border-gray-700 rounded p-2 text-white focus:border-cyan-500 outline-none">
          </div>
          <div>
            <label class="block text-xs font-mono text-gray-400 mb-1">AI CONFIDENCE (0-1.0)</label>
            <input [(ngModel)]="formData.aiConfidenceScore" name="conf" type="number" step="0.01" class="w-full bg-black border border-gray-700 rounded p-2 text-white focus:border-cyan-500 outline-none">
          </div>
        </div>

        <div>
          <label class="block text-xs font-mono text-gray-400 mb-1">DECISION NOTES</label>
          <textarea [(ngModel)]="formData.decisionNotes" name="notes" rows="3" class="w-full bg-black border border-gray-700 rounded p-2 text-white focus:border-cyan-500 outline-none"></textarea>
        </div>

        <button [disabled]="isLoading" type="submit" class="w-full bg-gradient-to-r from-cyan-600 to-blue-700 hover:from-cyan-500 hover:to-blue-600 text-white font-bold py-3 rounded shadow-lg shadow-cyan-900/20 transition-all transform active:scale-95 disabled:opacity-50 mt-4">
          {{ isLoading ? 'HASHING & ANCHORING...' : 'COMMIT TO LEDGER' }}
        </button>

        <div class="pt-6 mt-6 border-t border-gray-800">
          <label class="block text-xs font-mono text-gray-500 mb-2">OR BATCH UPLOAD (CSV)</label>
          <input type="file" (change)="onBatchUpload($event)" accept=".csv" class="block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-xs file:font-semibold file:bg-gray-800 file:text-cyan-400 hover:file:bg-gray-700 cursor-pointer"/>
          <p class="text-xs text-green-400 mt-2 font-mono" *ngIf="uploadStatus">{{ uploadStatus }}</p>
        </div>
      </form>
    </div>

    <div class="bg-[#111] p-6 rounded-lg border border-gray-800 flex flex-col h-full min-h-[400px]">
      <div class="flex-grow flex flex-col justify-center items-center text-center">
        
        <div *ngIf="!latestReceipt" class="text-gray-600 animate-pulse">
          <div class="text-6xl mb-4 opacity-20">ðŸ“œ</div>
          <p class="text-sm font-mono">Awaiting Immutable Record...</p>
        </div>

        <div *ngIf="latestReceipt" class="w-full text-left space-y-4 animate-fade-in-up">
          <div class="bg-green-500/10 border border-green-500/50 text-green-400 px-4 py-3 rounded mb-6 text-center text-sm font-bold tracking-widest">
            âœ“ BLOCK COMMITTED
          </div>
          
          <div class="space-y-4 font-mono text-xs">
            <div class="bg-black p-3 rounded border border-gray-800">
              <span class="text-gray-500 block mb-1">Sequence ID</span>
              <span class="text-white text-sm">{{ latestReceipt.sequence || 'GENESIS' }}</span>
            </div>
            <div class="bg-black p-3 rounded border border-gray-800">
              <span class="text-gray-500 block mb-1">Timestamp</span>
              <span class="text-white">{{ latestReceipt.timestamp }}</span>
            </div>
            <div class="bg-black p-3 rounded border border-gray-800 group cursor-help">
              <span class="text-gray-500 block mb-1">Current Hash (SHA-256)</span>
              <span class="text-cyan-500 break-all group-hover:text-white transition-colors">{{ latestReceipt.current_hash }}</span>
            </div>
            <div class="bg-black p-3 rounded border border-gray-800">
              <span class="text-gray-500 block mb-1">Previous Hash (Chain Link)</span>
              <span class="text-gray-600 break-all">{{ latestReceipt.prev_hash }}</span>
            </div>
          </div>

          <div class="mt-8 flex gap-3">
            <button (click)="downloadJSON()" class="flex-1 bg-gray-800 hover:bg-gray-700 text-white py-2 rounded border border-gray-600 transition-colors text-xs uppercase font-bold">
              Download JSON
            </button>
            <button (click)="downloadPDF()" class="flex-1 bg-gray-800 hover:bg-gray-700 text-white py-2 rounded border border-gray-600 transition-colors text-xs uppercase font-bold flex items-center justify-center gap-2">
              <span>ðŸ“„</span> PDF Cert
            </button>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>
